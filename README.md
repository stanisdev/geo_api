# geo_api

API, которое возвращает информацию о стране, на основе переданного IP-адреса.
В конфигурации имеется возможность указать - является ли обязательным регистрация пользователей для 
использования API.

**БД**: PostgreSQL, как наилучшее бесплатное open source решение в плане надёжности, проведения транзакций и т.д.

**Кеширование**: поскольку одно из требований API - максимально быстрый возврат результата на запрос, то обращение к API за получением информации об IP-адресе должно исключать любое взаимодействие с БД, хранящим свои данны на жестком диске. Поэтому используется, как одно из возможных решений, redis.

Redis: хранит в себе информацию о токенах пользователя, которые выдаются ему во время авторизации. Каждый запрос к API (там где ожидается проверка на авторизованность), ожидает от пользователя, выданный ему session-id и acsess_token.

Для обновления access_token, выдается refresh_token, который служит для получения новой пары токенов. Впрочем описывать ,более подробное назначение токенов доступа будет излишним.

npm-модуль **geoip-lite**: исходя из его документации, при первом запуске модуля, он помещает содержимое .dat файлов (которые выполняют роль хранилища сведений об IP в отношении принадлежности их к своей стране) в оперативную память. Всё последующее обращение к этому модулю, за получением информации об IP, будет происходить через считывание не с жесткого диска, а из опертивной памяти.

Запросы к PostgreSQL происходят в той области API, где не критична скорость ответа: регистрация, авторизация, монетизация.

***Установка***
-------------

```bash
$ npm i
```
```bash
$ ./node_modules/.bin/sequelize db:migrate
```
```bash
$ npm run start
```

Используемые технологии:

- `Node.js` - 10.6.0
- `npm` - 6.1.0
- `PostgreSQL` - 9.5.12
- `Redis` - 3.0.6